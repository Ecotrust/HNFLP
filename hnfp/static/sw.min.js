importScripts('https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js');

if (workbox) {
    console.log(`Yay! Workbox is loaded ðŸŽ‰`);

    // Background sync
    const bgSyncPlugin = new workbox.backgroundSync.Plugin('hnfpQueue', {
      maxRetentionTime: 10 * 24 * 60 // Retry for max of 10 days
    });

    // cache names
    workbox.core.setCacheNameDetails({
      prefix: 'hnfp',
      suffix: 'v3.2'
    });

    // JSON post requests off network add to background sync queue
    // background sync queue stored in IndexedDB
    // when browser regains connectivity, a sync event, requests are retried
    workbox.routing.registerRoute(
      /.*\/?(create|update|delete|detail)\/?.*/g,
      new workbox.strategies.NetworkOnly({
          cacheName: 'hnfp-bg-sync',
          plugins: [bgSyncPlugin]
      }),
      'POST'
    );

    // cache and serve images
    // fallback to network
    // cache for 30 days
    workbox.routing.registerRoute(
      /.*\.(?:png|jpg|jpeg|svg|gif)/g,
      new workbox.strategies.CacheFirst({
        cacheName: 'hnfp-image-cache',
        plugins: [
          new workbox.expiration.Plugin({
            maxEntries: 2000,
            maxAgeSeconds: 90 * 24 * 60 * 60, // 90 Days
          }),
        ],
      })
    );

    // cache and serve css and js
    // then update cache version with network version in background
    // serve new version next refresh
    workbox.routing.registerRoute(
      /\.(?:js|css)$/,
      workbox.strategies.staleWhileRevalidate({
        cacheName: 'hnfp-js-css',
      }),
    );

    // only allow admin access when connected to network
    workbox.routing.registerRoute(
      /\.*\/admin\/hnfp\/.*/g,
      workbox.strategies.networkOnly()
    );

    workbox.routing.setDefaultHandler(({url, event, params}) => {
        workbox.strategies.staleWhileRevalidate()
    });


} else {
    console.log(`Boo! Workbox didn't load ðŸ˜¬`);
}

workbox.precaching.precacheAndRoute([
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/d3/billboard.min.css",
    "revision": "59e86dd7b57a65eea733efe234956938"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/material-icons.css",
    "revision": "c5941eed2e20a509114128aab1e96edf"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/material.min.css",
    "revision": "b8bd450a2628f1ed9154038128554b21"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/materialize_stepper.css",
    "revision": "ef11a6de7202ecc8d9c5a110a759cd34"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/materialize.css",
    "revision": "a493a025029b0a4e35b914f9f68a08a8"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/materialize.min.css",
    "revision": "df8ee5622d9d736da06a6b0e7afdef55"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/openlayers/layerswitcher.css",
    "revision": "257fcd88d0d23294d6df5ce55ae5321d"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/openlayers/ol.css",
    "revision": "9307a55d70f7a6c5db88a42baeee5fe1"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/overwrite.css",
    "revision": "aa5ae31fe16ba6966e3ab36fd680f8a7"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/style.css",
    "revision": "27e5b40e700387c8370d72006fc137b1"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/alerts.js",
    "revision": "7048ad7e0c4fd395e7bd2798d7908d53"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/app.hnfp.js",
    "revision": "d0408ab1115f2fc5af3e0424df898de5"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/d3/billboard.min.js",
    "revision": "8302073fcbb4c19138df4257bd752903"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/d3/d3.min.js",
    "revision": "49e8de4b8730bb7c837196488a591842"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/dashboard.js",
    "revision": "7b4ad2b929aa776cb6f644e26bfdd0e1"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/form_map.js",
    "revision": "77d4c7bb94c53d8de0efadd1a94f701f"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/form.js",
    "revision": "b22d0865eaf5922b94f776a01655a9a0"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/jquery-3.2.1.min.js",
    "revision": "c9f5aeeca3ad37bf2aa006139b935f0a"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/map.hnfp.js",
    "revision": "0a0182bb9d88c1ff16b898eb62b391bb"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/map.landuse.js",
    "revision": "a74add2fe2a44e8a69fc95867d848f63"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/materialize/materialize_stepper.js",
    "revision": "9391125c91f0b3591c1148a94a0042e2"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/materialize/materialize.js",
    "revision": "e97da5c8b60e6673b98b286c2acf437d"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/materialize/materialize.min.js",
    "revision": "72604b4dd26e411dd6d7290b9f6c1d9c"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/observations.js",
    "revision": "45483322a73f81846e16939f9235956c"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/openlayers/layerswitcher.js",
    "revision": "ea80001f9bfefee836bc6c48fcb9673c"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/openlayers/ol.js",
    "revision": "2f79c767c9ba56b4996daba5c3e3f131"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/projects.js",
    "revision": "d0a9bd286ad34ba6617ca7694c3af0fa"
  },
  {
    "url": "apps/hnfp/hnfp/static/sw.js",
    "revision": "4436c73bee211a536456bc548886142b"
  },
  {
    "url": "apps/hnfp/hnfp/templates/base.html",
    "revision": "5ef887b0c9913e918a48f285f91e643b"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/account.html",
    "revision": "4cb2a18386b200cea5344dc8098e6c19"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/alert_confirm_delete.html",
    "revision": "9bf9595efac14e32f57ee6ebb8b48226"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/alert_update.html",
    "revision": "1e08b846e23bb4cd33e58c936f8ac31f"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/alert.html",
    "revision": "0528e1157e69323c76f7d2ad287640fe"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/extra_css.html",
    "revision": "af05738ee0564fc24d5ec25b44826264"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/extra_head.html",
    "revision": "4132f7713b6f791079c82a9e6a1009ee"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/extra_js.html",
    "revision": "04ec60bbcae5182b6e785bc7754ff590"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/footer.html",
    "revision": "c35a71096ac9f9e0d86cb77ef82680cd"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/logos.html",
    "revision": "20ac51f2604bcf02d388a1674714d934"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/navbar.html",
    "revision": "29fb0bcbc58bf7f4bd81021e32ff9525"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/observation_icons.html",
    "revision": "7e8d09cebc2258f721f480949e837f40"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard.html",
    "revision": "b64104183f4e9ce2d971f884054bdd71"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/alerts.html",
    "revision": "ec0bbb8b437cd6f9bc1fea0b12a72142"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/blog.html",
    "revision": "3e1687b0f31a66243e283f0913ef3504"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/events.html",
    "revision": "efaa254aa8b3859f870dc64d4e587c1f"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/observation.html",
    "revision": "57a9057cbfc58fb0a9fa2f752766b67d"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/open_positions.html",
    "revision": "e7747a6e64628ab8c602797924930040"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/weather.html",
    "revision": "22bce5c779f60fde99330aac6af01492"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/home.html",
    "revision": "1a03374367ce34628343d36231bd5db7"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/index.html",
    "revision": "5f0bef1f1d91a68b8ddba73d7b269cc7"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/job.html",
    "revision": "b69659fb016acf106af03c08260ce12c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/land_use_survey.html",
    "revision": "ced2c66a506435a162ca0134c775e21d"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuse/landuse_projects.html",
    "revision": "ccef4884736ca6369fbd262920bed42b"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuse/new_project.html",
    "revision": "6b33a3dcc57162e979ea8f97f6ae40ab"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuse/page.html",
    "revision": "1c57124b9779c137b7c3adf2db1fc8bc"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuseproject_confirm_delete.html",
    "revision": "405a838b5efed38feb617d1b424792bf"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuseproject_update.html",
    "revision": "02971b2e3b0b0712ffd050b82db29b7c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/login.html",
    "revision": "680b8580051873e980dee7d124d22b61"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/new_alert.html",
    "revision": "f8f5891a3f95ac96220f5540320ff76c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/new_observation.html",
    "revision": "cc1d70069a443136d67808b83cb0d56e"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/observation_confirm_delete.html",
    "revision": "bd947c293786d1b8a5ff382442ce933c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/observation_update.html",
    "revision": "4ca157ba01bcdca4cf261bbc67e060c9"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/observation.html",
    "revision": "d2a8b12bcca7d2835551a515206f5cfc"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/post_detail.html",
    "revision": "33860571c75131fe5503fc4cb4b1aab0"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/post_list.html",
    "revision": "1d5b4f840b186cb2f63f75a17cda2be0"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/welcome_steward.html",
    "revision": "34a8e15e5765cd913e2525362c9d194f"
  },
  {
    "url": "apps/hnfp/hnfp/workbox-config.js",
    "revision": "e9c7740c49ac21f988b5af5e0818e2da"
  },
  {
    "url": "scripts/register.html",
    "revision": "6d07951132da48db79a60f1ad4881eb9"
  },
  {
    "url": "/dashboard",
    "revision": "181411ce22a6a509a4567529b5d34dc7"
  },
  {
    "url": "/observation",
    "revision": "e126aad4ee4e9edb07865d3f164c5bad"
  },
  {
    "url": "/observation/new/",
    "revision": "6558bb484fd2b3aa377ded7719695dc9"
  },
  {
    "url": "/alert",
    "revision": "4a1217780f44eb9e8c4a334e583bd634"
  },
  {
    "url": "/alert/new/",
    "revision": "cd54b0662a0b6e193a87b3b8c10215c7"
  },
  {
    "url": "/forum",
    "revision": "84d09e6a5a61d42d41fc0273a97149eb"
  }
])
