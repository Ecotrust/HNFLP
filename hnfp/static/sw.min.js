importScripts('https://storage.googleapis.com/workbox-cdn/releases/3.1.0/workbox-sw.js');

if (workbox) {
    console.log(`Yay! Workbox is loaded ðŸŽ‰`);

    // Background sync
    const bgSyncPlugin = new workbox.backgroundSync.Plugin('hnfpQueue', {
      maxRetentionTime: 10 * 24 * 60 // Retry for max of 10 days
    });

    // cache names
    workbox.core.setCacheNameDetails({
      prefix: 'hnfp',
      suffix: 'v2'
    });

    // JSON post requests off network add to background sync queue
    // background sync queue stored in IndexedDB
    // when browser regains connectivity, a sync event, requests are retried
    workbox.routing.registerRoute(
      /.*\/?(create|update|delete|detail)\/?.*/g,
      new workbox.strategies.NetworkOnly({
          cacheName: 'hnfp-bg-sync',
          plugins: [bgSyncPlugin]
      }),
      'POST'
    );

    // cache and serve images
    // fallback to network
    // cache for 30 days
    workbox.routing.registerRoute(
      /.*\.(?:png|jpg|jpeg|svg|gif)/g,
      new workbox.strategies.CacheFirst({
        cacheName: 'hnfp-image-cache',
        plugins: [
          new workbox.expiration.Plugin({
            maxEntries: 2000,
            maxAgeSeconds: 90 * 24 * 60 * 60, // 90 Days
          }),
        ],
      })
    );

    // cache and serve css and js
    // then update cache version with network version in background
    // serve new version next refresh
    workbox.routing.registerRoute(
      /\.(?:js|css)$/,
      workbox.strategies.staleWhileRevalidate({
        cacheName: 'hnfp-js-css',
      }),
    );

    // only allow admin access when connected to network
    workbox.routing.registerRoute(
      /\.*\/admin\/hnfp\/.*/g,
      workbox.strategies.networkOnly()
    );

    workbox.routing.setDefaultHandler(({url, event, params}) => {
        workbox.strategies.staleWhileRevalidate()
    });


} else {
    console.log(`Boo! Workbox didn't load ðŸ˜¬`);
}

workbox.precaching.precacheAndRoute([
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/d3/billboard.min.css",
    "revision": "59e86dd7b57a65eea733efe234956938"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/material-icons.css",
    "revision": "c5941eed2e20a509114128aab1e96edf"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/material.min.css",
    "revision": "b8bd450a2628f1ed9154038128554b21"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/materialize_stepper.css",
    "revision": "ef11a6de7202ecc8d9c5a110a759cd34"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/materialize.css",
    "revision": "a493a025029b0a4e35b914f9f68a08a8"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/materialize.min.css",
    "revision": "df8ee5622d9d736da06a6b0e7afdef55"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/openlayers/layerswitcher.css",
    "revision": "257fcd88d0d23294d6df5ce55ae5321d"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/openlayers/ol.css",
    "revision": "9307a55d70f7a6c5db88a42baeee5fe1"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/overwrite.css",
    "revision": "aa5ae31fe16ba6966e3ab36fd680f8a7"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/css/style.css",
    "revision": "d1d3af14ffdae2e126997afa3e5d5a94"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/alerts.js",
    "revision": "e4f65eaac07bafadcc49d277e87d8948"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/d3/billboard.min.js",
    "revision": "8302073fcbb4c19138df4257bd752903"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/d3/d3.min.js",
    "revision": "49e8de4b8730bb7c837196488a591842"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/dashboard.js",
    "revision": "7b4ad2b929aa776cb6f644e26bfdd0e1"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/form_map.js",
    "revision": "77d4c7bb94c53d8de0efadd1a94f701f"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/form.js",
    "revision": "31cde1a76e5d6e9e63d667e9a024c356"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/jquery-3.2.1.min.js",
    "revision": "c9f5aeeca3ad37bf2aa006139b935f0a"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/map.hnfp.js",
    "revision": "96ec0edaf2afc60b34b8f332c0ebd390"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/map.landuse.js",
    "revision": "a74add2fe2a44e8a69fc95867d848f63"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/materialize/materialize_stepper.js",
    "revision": "9391125c91f0b3591c1148a94a0042e2"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/materialize/materialize.js",
    "revision": "e97da5c8b60e6673b98b286c2acf437d"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/materialize/materialize.min.js",
    "revision": "72604b4dd26e411dd6d7290b9f6c1d9c"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/observations.js",
    "revision": "45483322a73f81846e16939f9235956c"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/openlayers/layerswitcher.js",
    "revision": "ea80001f9bfefee836bc6c48fcb9673c"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/openlayers/ol.js",
    "revision": "2f79c767c9ba56b4996daba5c3e3f131"
  },
  {
    "url": "apps/hnfp/hnfp/static/hnfp/js/projects.js",
    "revision": "d0a9bd286ad34ba6617ca7694c3af0fa"
  },
  {
    "url": "apps/hnfp/hnfp/static/sw.js",
    "revision": "c80558c1c79e8d819de882b2b4e12ecc"
  },
  {
    "url": "apps/hnfp/hnfp/templates/base.html",
    "revision": "5ef887b0c9913e918a48f285f91e643b"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/account.html",
    "revision": "4cb2a18386b200cea5344dc8098e6c19"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/alert_confirm_delete.html",
    "revision": "86627b70585583ff330d1d574b847a45"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/alert_update.html",
    "revision": "f3ef630108aca78f7482eabd14b8b95c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/alert.html",
    "revision": "0528e1157e69323c76f7d2ad287640fe"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/extra_css.html",
    "revision": "af05738ee0564fc24d5ec25b44826264"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/extra_head.html",
    "revision": "4132f7713b6f791079c82a9e6a1009ee"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/extra_js.html",
    "revision": "04ec60bbcae5182b6e785bc7754ff590"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/footer.html",
    "revision": "c35a71096ac9f9e0d86cb77ef82680cd"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/logos.html",
    "revision": "20ac51f2604bcf02d388a1674714d934"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/navbar.html",
    "revision": "b68485af382f3dffab4bb71ee816a4ec"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/blocks/observation_icons.html",
    "revision": "1cf946e6e947968c552175f87714aff0"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard.html",
    "revision": "b64104183f4e9ce2d971f884054bdd71"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/alerts.html",
    "revision": "921d4c9db54172bf4e32f338a7cdbc20"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/blog.html",
    "revision": "6ea857e1e46539e8066d7ba05a8f24b7"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/events.html",
    "revision": "89e78754a48d675f890e54764e6fc87b"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/observation.html",
    "revision": "40245a90339d9ef7546e4189b57121b4"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/open_positions.html",
    "revision": "fda486a5337a04f5d89d7d45ca648bd3"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/dashboard/weather.html",
    "revision": "9a91741dd6421ad72d0e2ee6d78e659a"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/home.html",
    "revision": "1a03374367ce34628343d36231bd5db7"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/index.html",
    "revision": "5f0bef1f1d91a68b8ddba73d7b269cc7"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/job.html",
    "revision": "b69659fb016acf106af03c08260ce12c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/land_use_survey.html",
    "revision": "9f0cb3da5c2fd88d2073ddc73233cba5"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuse/new_project.html",
    "revision": "99862db9c4fe3198fa0383212a157655"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuse/page.html",
    "revision": "1c57124b9779c137b7c3adf2db1fc8bc"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuseproject_confirm_delete.html",
    "revision": "10edfa3d1109946b4e143d27a6fd96e4"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/landuseproject_update.html",
    "revision": "02971b2e3b0b0712ffd050b82db29b7c"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/login.html",
    "revision": "5237956f0ab7e2a5ac5b46c98ccb0040"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/new_alert.html",
    "revision": "e01625b4bc44cf7801ed01acc96727f3"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/new_observation.html",
    "revision": "cd777a48dac595fc6a206b30a0467735"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/observation_confirm_delete.html",
    "revision": "bea9c85023e323e981964960b291e2cb"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/observation_update.html",
    "revision": "4cd0054b7239111d382929826d2b9736"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/observation.html",
    "revision": "4fad567f7d6c35bc8aa16054818eedea"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/post_detail.html",
    "revision": "95dbec2975a189a1b29b1a9b52d50109"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/post_list.html",
    "revision": "1d5b4f840b186cb2f63f75a17cda2be0"
  },
  {
    "url": "apps/hnfp/hnfp/templates/hnfp/welcome_steward.html",
    "revision": "34a8e15e5765cd913e2525362c9d194f"
  },
  {
    "url": "apps/hnfp/hnfp/workbox-config.js",
    "revision": "e9c7740c49ac21f988b5af5e0818e2da"
  },
  {
    "url": "apps/hnfp/workbox-config.js",
    "revision": "33a16c8f4b20b68dc4885d162a75215a"
  },
  {
    "url": "/dashboard",
    "revision": "4ec8d77fceea0b7165b2ad3803221ccb"
  },
  {
    "url": "/observation",
    "revision": "6195a25d497353b9ad2a8f039a4ac229"
  },
  {
    "url": "/observation/new/",
    "revision": "ded4aa0c5872f9e67482877336da1d4d"
  },
  {
    "url": "/alert",
    "revision": "81a97901cc806a041ccae51d11f96fc5"
  },
  {
    "url": "/alert/new/",
    "revision": "eb51c220cbe5bc863133967dd03080f8"
  },
  {
    "url": "/forum",
    "revision": "b87c40a2a96e60760bb6f11932f03792"
  }
])
